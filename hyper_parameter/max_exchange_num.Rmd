---
title: "analysis"
output: html_document
date: '2022-08-31'
---

```{r}
library(tidyverse)
df = read_csv('/data/home/wangzz/github/splicing-universal-experiment/hyper_parameter/max_exchange_num.csv') %>% 
  select(-...1)
```

```{r}
df2 = bind_rows(
  df %>% 
    select(n,p,time=time_2,accuracy=accuracy_2) %>% 
    mutate(max_exchange_num = '2'),
  df %>% 
    select(n,p,time=time_5,accuracy=accuracy_5) %>% 
    mutate(max_exchange_num = '5'),  
  df %>% 
    select(n,p,time=time_10,accuracy=accuracy_10) %>% 
    mutate(max_exchange_num = '10'),
  df %>% 
    select(n,p,time=time_20,accuracy=accuracy_20) %>% 
    mutate(max_exchange_num = '20'),
  df %>% 
    select(n,p,time=time_30,accuracy=accuracy_30) %>% 
    mutate(max_exchange_num = '30'),
  df %>% 
    select(n,p,time=time_40,accuracy=accuracy_40) %>% 
    mutate(max_exchange_num = '40'),
  df %>% 
    select(n,p,time=time_50,accuracy=accuracy_50) %>% 
    mutate(max_exchange_num = '50')
)
```


```{r}
df2$max_exchange_num = factor(df2$max_exchange_num,
  levels = c("2", "5", "10", "20", "30", "40", "50"))
```


```{r}
df_n = 
  df2 %>% 
  filter(p==500, n<=800) %>% 
  group_by(n,k_max=max_exchange_num) %>% 
  summarise(accuracy = mean(accuracy), time = mean(time))
```

## plot


```{r}
p1 = ggplot(df_n, aes(n, accuracy, color = k_max)) +
    labs(x='Sample size', y='Accuracy') +
    geom_line() +
    geom_point()
```

```{r}
p2 = ggplot(df_n, aes(n, time, color = k_max)) +
    labs(x='Sample size', y='Runtime (Sec)') +
    geom_line() +
    geom_point()
```
